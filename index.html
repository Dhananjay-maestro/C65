<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Happy Birthday Princee</title>
  <link href="https://fonts.googleapis.com/css2?family=Merienda:wght@700&family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1:#fff0f8;
      --bg2:#e8f7ff;
      --accent:#ff2d7a;
      --accent-2:#ff83c7;
      --muted:#5a5a5a;
    }
    *{box-sizing:border-box}
    html,body{
      height:100%;margin:0;font-family:Poppins,Arial; 
      background:linear-gradient(135deg,var(--bg1),var(--bg2));
    }
    .stage{
      height:100vh; width:100vw; display:flex; 
      align-items:center; justify-content:center; 
      position:relative; overflow:hidden;
    }

.glow{position:absolute; border-radius:50%; filter:blur(80px); opacity:0.28;}
.g1{width:420px;height:420px;background:radial-gradient(circle,#ffd7ef,transparent 40%);left:-80px;top:-60px}
.g2{width:520px;height:520px;background:radial-gradient(circle,#d8f3ff,transparent 40%);right:-120px;bottom:-100px}

.card{
  width:min(920px,94%);
  max-width:1100px;
  height:min(680px,86vh);
  background:linear-gradient(180deg,rgba(255,255,255,0.92),rgba(255,255,255,0.85));
  border-radius:28px;
  box-shadow:0 30px 80px rgba(20,20,50,0.12);
  display:flex; gap:24px; padding:28px; align-items:center; position:relative;
}

.left{flex:1; display:flex; justify-content:center; align-items:center; transform:translateX(-12px);}
.balloon-bunch{width:380px; height:480px; position:relative;}
.balloon{position:absolute; transform-origin:center bottom; opacity:1; z-index:2}

/* MIDDLE ROW */
.b1{ left:22%; bottom:32%; width:140px; animation: rise 6s ease-in-out infinite, sway 4.2s ease-in-out infinite; }
.b2{ left:42%; bottom:36%; width:160px; animation: rise 5.2s ease-in-out infinite, sway 4.6s ease-in-out infinite; }
.b3{ left:62%; bottom:32%; width:130px; animation: rise 6.6s ease-in-out infinite, sway 4s ease-in-out infinite; }

/* UPPER ROW */
.b4{ left:22%; bottom:62%; width:120px; animation: rise 6.4s ease-in-out infinite, sway 4.8s ease-in-out infinite; }
.b5{ left:42%; bottom:66%; width:140px; animation: rise 5.8s ease-in-out infinite, sway 5s ease-in-out infinite; }
.b6{ left:62%; bottom:62%; width:110px; animation: rise 6.6s ease-in-out infinite, sway 4.4s ease-in-out infinite; }

/* BOTTOM ROW */
.b7{ left:22%; bottom:2%; width:120px; animation: rise 6.1s ease-in-out infinite, sway 4.5s ease-in-out infinite; }
.b8{ left:42%; bottom:6%; width:140px; animation: rise 5.7s ease-in-out infinite, sway 4.9s ease-in-out infinite; }
.b9{ left:62%; bottom:2%; width:110px; animation: rise 6.2s ease-in-out infinite, sway 4.3s ease-in-out infinite; }

@keyframes rise{
  0%{transform:translateY(0) rotate(-6deg)}
  50%{transform:translateY(-20px) rotate(6deg)}
  100%{transform:translateY(0) rotate(-6deg)}
}
@keyframes sway{
  0%{transform:translateX(0) rotate(-3deg)}
  50%{transform:translateX(8px) rotate(4deg)}
  100%{transform:translateX(0) rotate(-3deg)}
}

.premium-balloon{
  filter: drop-shadow(0 12px 28px rgba(40,18,60,0.14)) saturate(1.05);
  transform: rotate(-2deg);
  transition: transform .32s ease;
}

@media (hover:hover){
  .premium-balloon:hover{
    transform: translateY(-6px) rotate(0deg) scale(1.02);
  }
}

.right{flex:1; padding:16px; display:flex; flex-direction:column;}
.badge{
  font-family:Merienda; color:var(--accent); 
  background:rgba(255,45,122,0.08); padding:8px 14px; border-radius:18px;
}

h1{
  font-family:Merienda; font-size:3.1rem; color:var(--accent-2); margin:16px 0 6px;
}

.subtitle{font-size:1.05rem; color:var(--muted); margin-bottom:18px;}

.action-row{
  display:flex;
  gap:20px;
  align-items:flex-start;
}

.cute-click{
  margin-top:6px;
  text-align:center;
  font-size:0.9rem;
  color:var(--accent);
  font-weight:700;
}

.btn{
  background:linear-gradient(90deg,var(--accent),var(--accent-2));
  color:white; padding:12px 18px;
  border-radius:24px; border:2px solid var(--accent-2);
  font-weight:600; cursor:pointer;
  box-shadow:0 0 14px rgba(255,130,180,0.45);
  transition:.25s ease;
}

.btn.secondary{
  background:transparent;
  color:var(--accent-2);
  border:2px solid var(--accent-2);
}

#petalCanvas{
  position:absolute; left:0; top:0; width:100%; height:100%; pointer-events:none;
  z-index:5;
}

.popup-title{ font-size:18px; font-weight:700; margin-bottom:10px; }
.popup-img{
  width:100%;
  max-height:260px;
  object-fit:contain;
  border-radius:12px; 
  margin-bottom:10px;
}
.popup-list p{
  margin:10px 0; 
  font-size:15px; 
  color:var(--muted);
}
  </style>
</head>

<body>

<!-- âœ”ï¸ WORKING HOSTED SONG -->
<audio id="bgSong" src="sandbox:/mnt/data/theuned_happy-birthday-crowd(chosic.com).mp3"></audio>

  <div class="stage">
    <div class="glow g1"></div>
    <div class="glow g2"></div>

<div class="card">

  <!-- Rose petals canvas (uses your petal image, sampled into many small petals) -->
  <canvas id="petalCanvas"></canvas>

  <div class="left">
    <div class="balloon-bunch">

      <img class="balloon b1 premium-balloon" src="https://i.ibb.co/Sw47j7k4/pngtree-pink-ballons-png-image-15802315.png" alt="">
      <img class="balloon b2 premium-balloon" src="https://i.ibb.co/Sw47j7k4/pngtree-pink-ballons-png-image-15802315.png" alt="">
      <img class="balloon b3 premium-balloon" src="https://i.ibb.co/Sw47j7k4/pngtree-pink-ballons-png-image-15802315.png" alt="">

      <img class="balloon b4 premium-balloon" src="https://i.ibb.co/Sw47j7k4/pngtree-pink-ballons-png-image-15802315.png" alt="">
      <img class="balloon b5 premium-balloon" src="https://i.ibb.co/Sw47j7k4/pngtree-pink-ballons-png-image-15802315.png" alt="">
      <img class="balloon b6 premium-balloon" src="https://i.ibb.co/Sw47j7k4/pngtree-pink-ballons-png-image-15802315.png" alt="">

      <img class="balloon b7 premium-balloon" src="https://i.ibb.co/Sw47j7k4/pngtree-pink-ballons-png-image-15802315.png" alt="">
      <img class="balloon b8 premium-balloon" src="https://i.ibb.co/Sw47j7k4/pngtree-pink-ballons-png-image-15802315.png" alt="">
      <img class="balloon b9 premium-balloon" src="https://i.ibb.co/Sw47j7k4/pngtree-pink-ballons-png-image-15802315.png" alt="">

    </div>
  </div>

  <div class="right">

    <div class="badge">For Princess</div>

    <h1>Happy Birthday <span style="color:var(--accent)">Princee</span> ðŸŽ€</h1>

    <div class="subtitle">May your day sparkle with smiles, hugs and sweet surprises âœ¨</div>

    <div class="action-row">

      <div style="display:flex; flex-direction:column; align-items:center;">
        <button class="btn secondary" id="confettiBtn">CelebrateðŸŽ€</button>
        <div class="cute-click">Click â†‘</div>
      </div>

      <div style="display:flex; flex-direction:column; align-items:center;">
        <button class="btn secondary" id="msgBtn">MemoryðŸŽ€</button>
        <div class="cute-click">Click â†‘</div>
      </div>

    </div>

  </div>

</div>

  </div>

<footer style="position:fixed; bottom:10px; width:100%; text-align:center; color:var(--muted); font-size:0.9rem;">
  from Dhananjay to Chhipakalee
</footer>

<script>
(function(){
  // your provided petal sprite photo (we will sample random crops from it)
  const PETAL_IMAGE_URL = 'https://i.ibb.co/GQgrqrdS/spreading-red-rose-petals-transparent-background-photography-image-bloom-marriage-231934-wh860-1.png';

  const canvas = document.getElementById('petalCanvas');
  const ctx = canvas.getContext('2d');
  let W=0, H=0, particles=[], animId=null, srcImg=null, imgReady=false;

  function resize(){
    const rect = canvas.getBoundingClientRect();
    const dpr = window.devicePixelRatio || 1;
    canvas.width = rect.width * dpr;
    canvas.height = rect.height * dpr;
    canvas.style.width = rect.width + 'px';
    canvas.style.height = rect.height + 'px';
    ctx.setTransform(dpr,0,0,dpr,0,0);
    W = rect.width; H = rect.height;
  }

  const rand = (a,b) => Math.random()*(b-a)+a;

  // load source image
  function loadSourceImage(cb){
    srcImg = new Image();
    srcImg.crossOrigin = 'anonymous';
    srcImg.onload = ()=>{
      imgReady = true;
      if(cb) cb();
    };
    srcImg.onerror = ()=>{
      // fallback: create small drawn petal texture
      srcImg = createFallbackTexture();
      imgReady = true;
      if(cb) cb();
    };
    srcImg.src = PETAL_IMAGE_URL;
  }

  // fallback texture if source fails
  function createFallbackTexture(){
    const c = document.createElement('canvas');
    c.width = 300; c.height = 200;
    const r = c.getContext('2d');
    r.fillStyle = '#fff0f8';
    r.fillRect(0,0,c.width,c.height);
    // draw a couple of mock petals
    for(let i=0;i<6;i++){
      r.save();
      r.translate(rand(20,c.width-20), rand(20,c.height-20));
      r.rotate(rand(-0.6,0.6));
      const g = r.createLinearGradient(-30,-10,30,30);
      g.addColorStop(0,'#ff9ecb'); g.addColorStop(1,'#ff2d7a');
      r.fillStyle = g;
      r.beginPath();
      r.moveTo(0,-18); r.bezierCurveTo(14,-6,14,12,0,22);
      r.bezierCurveTo(-14,12,-14,-6,0,-18);
      r.fill();
      r.restore();
    }
    return c;
  }

  // create a masked petal canvas by sampling random area of source image
  function makePetalCanvas(targetSize){
    const off = document.createElement('canvas');
    const s = Math.max(64, Math.min(220, Math.floor(targetSize*1.6)));
    off.width = s; off.height = s;
    const c = off.getContext('2d');

    // pick random crop from source image
    const sx = rand(0, Math.max(0, srcImg.width - s));
    const sy = rand(0, Math.max(0, srcImg.height - s));
    // draw sampled area onto offscreen, scaled to cover
    try {
      c.drawImage(srcImg, sx, sy, s, s, 0, 0, s, s);
    } catch(e) {
      // if drawImage fails, fallback to gradient petal
      c.fillStyle = '#ff2d7a';
      c.fillRect(0,0,s,s);
    }

    // create petal-shaped mask (irregular ellipse with bezier)
    c.globalCompositeOperation = 'destination-in';
    c.beginPath();
    // irregular petal using bezier curve path
    const cx = s/2, cy = s/2;
    const rw = s*0.48, rh = s*0.68;
    c.moveTo(cx, cy - rh*0.6);
    c.bezierCurveTo(cx + rw*0.45, cy - rh*0.2, cx + rw*0.35, cy + rh*0.6, cx, cy + rh*0.7);
    c.bezierCurveTo(cx - rw*0.35, cy + rh*0.6, cx - rw*0.45, cy - rh*0.2, cx, cy - rh*0.6);
    c.closePath();
    c.fill();

    // subtle highlight to keep texture visible
    c.globalCompositeOperation = 'source-over';
    c.fillStyle = 'rgba(255,255,255,0.06)';
    c.beginPath();
    c.ellipse(cx - s*0.08, cy - s*0.08, s*0.18, s*0.28, -0.35, 0, Math.PI*2);
    c.fill();

    return off;
  }

  function spawnParticles(count=240){
    if(!imgReady){
      loadSourceImage(()=> spawnParticles(count));
      return;
    }
    const limit = Math.min(count, window.innerWidth < 480 ? 110 : count);
    for(let i=0;i<limit;i++){
      const size = rand(18,48);
      const texture = makePetalCanvas(size);
      particles.push({
        x: rand(-50, W+50),
        y: rand(-H*0.6, -10),
        vx: rand(-1.2, 1.2),
        vy: rand(0.8, 3.2),
        size,
        rot: rand(0, Math.PI*2),
        spin: rand(-0.03, 0.05),
        swayAmp: rand(6, 28),
        swayFreq: rand(0.002, 0.009),
        life: 0,
        ttl: rand(800, 1600),
        alpha: rand(0.82, 1),
        texture
      });
    }
    if(!animId) animate();
  }

  function drawAll(){
    ctx.clearRect(0,0,W,H);
    const t = performance.now();
    for(let i = particles.length -1; i >= 0; i--){
      const p = particles[i];
      p.life++;
      const sway = Math.sin((t * p.swayFreq) + p.x) * p.swayAmp;
      p.x += p.vx + sway * 0.002;
      p.y += p.vy;
      p.rot += p.spin;

      ctx.save();
      ctx.globalAlpha = p.alpha * (1 - Math.min(p.life / p.ttl, 0.95));
      ctx.translate(p.x, p.y);
      ctx.rotate(p.rot);
      // draw the petal texture (already masked)
      try {
        ctx.drawImage(p.texture, -p.size/2, -p.size/2, p.size, p.size);
      } catch(e){}
      ctx.restore();

      if(p.y > H + 80 || p.life > p.ttl) particles.splice(i,1);
    }

    if(particles.length === 0){
      cancelAnimationFrame(animId);
      animId = null;
    }
  }

  function animate(){
    animId = requestAnimationFrame(animate);
    drawAll();
  }

  /* memory popup unchanged */
  function showMemoryPopup(){
    if(document.getElementById('memoryPopupOverlay')) return;

    const overlay=document.createElement('div');
    overlay.id='memoryPopupOverlay';
    overlay.style.position='fixed';
    overlay.style.left=0; overlay.style.top=0; overlay.style.right=0; overlay.style.bottom=0;
    overlay.style.background='rgba(0,0,0,0.45)';
    overlay.style.display='flex';
    overlay.style.alignItems='center';
    overlay.style.justifyContent='center';
    overlay.style.zIndex=9999;

    const box=document.createElement('div');
    box.style.width='min(500px,90%)';
    box.style.background='linear-gradient(180deg,#fff,#fffaf7)';
    box.style.borderRadius='20px';
    box.style.padding='20px 22px';
    box.style.boxShadow='0 20px 60px rgba(0,0,0,0.2)';
    box.style.textAlign='left';

    const title=document.createElement('div');
    title.className='popup-title';
    title.textContent='Happy Birthday My Dear Princess ðŸŽ€ðŸŽ‚ðŸŽ‚ðŸŽ€';

    const img=document.createElement('img');
    img.className='popup-img';
    img.src='https://i.ibb.co/ZRybyWQ5/IMG-20251120-000301.jpg';

    const note=document.createElement('p');
    note.textContent='Chhipakalee ðŸ˜ƒ Just kidding ðŸ˜ƒ';

    const close=document.createElement('button');
    close.textContent='Close';
    close.style.marginTop='12px';
    close.style.padding='10px 14px';
    close.style.borderRadius='12px';
    close.style.border='0';
    close.style.background='linear-gradient(90deg,#ff2d7a,#ff83c7)';
    close.style.color='white';
    close.style.fontWeight='700';
    close.style.cursor='pointer';
    close.onclick=()=>overlay.remove();

    box.appendChild(title);
    box.appendChild(img);
    box.appendChild(note);
    box.appendChild(close);
    overlay.appendChild(box);

    overlay.addEventListener('click',e=>{ if(e.target===overlay) overlay.remove(); });

    document.body.appendChild(overlay);
  }

  function attachHandlers(){
    document.getElementById('confettiBtn').onclick=()=>{
      spawnParticles(240);
      const song=document.getElementById("bgSong");
      if(song){ song.volume=1; song.play().catch(()=>{}); }
    };
    document.getElementById('msgBtn').onclick=showMemoryPopup;
  }

  window.addEventListener('load',()=>{
    resize();
    loadSourceImage();
    attachHandlers();
  });
  window.addEventListener('resize',()=>setTimeout(resize,80));

})();
</script>

</body>
</html>
